(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["cardDragComponent"]=t():e["cardDragComponent"]=t()})("undefined"!==typeof self?self:this,(function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="fae3")}({2350:function(e,t){function n(e,t){var n=e[1]||"",o=e[3];if(!o)return n;if(t&&"function"===typeof btoa){var r=i(o),s=o.sources.map((function(e){return"/*# sourceURL="+o.sourceRoot+e+" */"}));return[n].concat(s).concat([r]).join("\n")}return[n].join("\n")}function i(e){var t=btoa(unescape(encodeURIComponent(JSON.stringify(e)))),n="sourceMappingURL=data:application/json;charset=utf-8;base64,"+t;return"/*# "+n+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i=n(t,e);return t[2]?"@media "+t[2]+"{"+i+"}":i})).join("")},t.i=function(e,n){"string"===typeof e&&(e=[[null,e,""]]);for(var i={},o=0;o<this.length;o++){var r=this[o][0];"number"===typeof r&&(i[r]=!0)}for(o=0;o<e.length;o++){var s=e[o];"number"===typeof s[0]&&i[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),t.push(s))}},t}},"499e":function(e,t,n){"use strict";function i(e,t){for(var n=[],i={},o=0;o<t.length;o++){var r=t[o],s=r[0],d=r[1],a=r[2],u=r[3],c={id:e+":"+o,css:d,media:a,sourceMap:u};i[s]?i[s].parts.push(c):n.push(i[s]={id:s,parts:[c]})}return n}n.r(t),n.d(t,"default",(function(){return m}));var o="undefined"!==typeof document;if("undefined"!==typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var r={},s=o&&(document.head||document.getElementsByTagName("head")[0]),d=null,a=0,u=!1,c=function(){},l=null,f="data-vue-ssr-id",p="undefined"!==typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function m(e,t,n,o){u=n,l=o||{};var s=i(e,t);return h(s),function(t){for(var n=[],o=0;o<s.length;o++){var d=s[o],a=r[d.id];a.refs--,n.push(a)}t?(s=i(e,t),h(s)):s=[];for(o=0;o<n.length;o++){a=n[o];if(0===a.refs){for(var u=0;u<a.parts.length;u++)a.parts[u]();delete r[a.id]}}}}function h(e){for(var t=0;t<e.length;t++){var n=e[t],i=r[n.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](n.parts[o]);for(;o<n.parts.length;o++)i.parts.push(y(n.parts[o]));i.parts.length>n.parts.length&&(i.parts.length=n.parts.length)}else{var s=[];for(o=0;o<n.parts.length;o++)s.push(y(n.parts[o]));r[n.id]={id:n.id,refs:1,parts:s}}}}function v(){var e=document.createElement("style");return e.type="text/css",s.appendChild(e),e}function y(e){var t,n,i=document.querySelector("style["+f+'~="'+e.id+'"]');if(i){if(u)return c;i.parentNode.removeChild(i)}if(p){var o=a++;i=d||(d=v()),t=x.bind(null,i,o,!1),n=x.bind(null,i,o,!0)}else i=v(),t=b.bind(null,i),n=function(){i.parentNode.removeChild(i)};return t(e),function(i){if(i){if(i.css===e.css&&i.media===e.media&&i.sourceMap===e.sourceMap)return;t(e=i)}else n()}}var g=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}();function x(e,t,n,i){var o=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=g(t,o);else{var r=document.createTextNode(o),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(r,s[t]):e.appendChild(r)}}function b(e,t){var n=t.css,i=t.media,o=t.sourceMap;if(i&&e.setAttribute("media",i),l.ssrId&&e.setAttribute(f,t.id),o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{while(e.firstChild)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},5373:function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,".d_cardBorderBox[data-v-14e5f87a]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:absolute;-webkit-transition:all .3s;transition:all .3s;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.d_cardBorderBox[data-v-14e5f87a],.d_cardInsideBox[data-v-14e5f87a]{display:-webkit-box;display:-ms-flexbox;display:flex}.d_cardInsideBox[data-v-14e5f87a]{border-radius:5px;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.d_menuTitle[data-v-14e5f87a]{pointer-events:none}.d_topMenuBox[data-v-14e5f87a]{height:50px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:14px;color:#838383;background-color:#fff;padding:0 15px}.d_moveBox[data-v-14e5f87a]{top:20px;left:20px;z-index:300;-webkit-transition:none;transition:none}.d_emptyContent[data-v-14e5f87a]{width:100%;height:100%;font-size:16px;color:#979797;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.d_transition[data-v-14e5f87a]{-webkit-transition:all .3s;transition:all .3s}",""])},"67dc":function(e,t,n){"use strict";var i=n("838a"),o=n.n(i);o.a},"838a":function(e,t,n){var i=n("5373");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=n("499e").default;o("1b7be030",i,!0,{sourceMap:!1,shadowMode:!1})},f6fd:function(e,t){(function(e){var t="currentScript",n=e.getElementsByTagName("script");t in e||Object.defineProperty(e,t,{get:function(){try{throw new Error}catch(i){var e,t=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(i.stack)||[!1])[1];for(e in n)if(n[e].src==t||"interactive"==n[e].readyState)return n[e];return null}}})})(document)},fae3:function(e,t,n){"use strict";var i;(n.r(t),"undefined"!==typeof window)&&(n("f6fd"),(i=window.document.currentScript)&&(i=i.src.match(/(.+\/)[^/]+\.js(\?.*)?$/))&&(n.p=i[1]));var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{style:{position:"relative",overflow:"hidden",height:e.computeTop(e.data.length)+e.cardOutsideHeight+"px",width:e.cardOutsideWidth*e.colNum+"px"}},e._l(e.data,(function(t){return n("div",{key:t.id,staticClass:"d_cardBorderBox",style:{width:e.cardOutsideWidth+"px",height:e.cardOutsideHeight+"px"},attrs:{id:t.id}},[n("div",{staticClass:"d_cardInsideBox",style:{width:e.cardInsideWidth+"px",height:e.cardInsideHeight+"px"}},[n("div",{staticClass:"d_topWrapBox",on:{mousedown:function(n){return e.touchStart(n,t.id)}}},[e._t("header",[n("div",{staticClass:"d_topMenuBox"},[t.name?n("div",{staticClass:"d_menuTitle"},[e._v(e._s(t.name))]):n("div",{staticClass:"d_menuTitle"},[e._v(" 默认标题 ")])])],{item:t})],2),t.componentData?n(t.componentData,{tag:"component",attrs:{itemData:t}}):e._t("content",[n("div",{staticClass:"d_emptyContent"},[e._v("\n          卡片暂无内容\n        ")])],{item:t})],2)])})),0)},r=[],s={name:"cardDragger",props:{data:{type:Array,default:function(){return[]}},colNum:{type:Number,default:2},fontSize:{type:Number,default:0},outsideWidth:{type:Number,default:590},outsideHeight:{type:Number,default:380},insideWidth:{type:Number,default:560},insideHeight:{type:Number,default:320}},data:()=>({mousedownTimer:null,cardOutsideWidth:0,cardOutsideHeight:0,cardInsideWidth:0,cardInsideHeight:0}),created(){if(this.fontSize){let e=Number(document.getElementsByTagName("html")[0].style.fontSize.replace(/px/gi,""));this.cardOutsideWidth=Math.ceil(this.outsideWidth*e/this.fontSize),this.cardOutsideHeight=Math.ceil(this.outsideHeight*e/this.fontSize),this.cardInsideWidth=Math.ceil(this.insideWidth*e/this.fontSize),this.cardInsideHeight=Math.ceil(this.insideHeight*e/this.fontSize),window.addEventListener("resize",this.init)}else this.cardOutsideWidth=this.outsideWidth,this.cardOutsideHeight=this.outsideHeight,this.cardInsideWidth=this.insideWidth,this.cardInsideHeight=this.insideHeight},methods:{init(){let e=Number(document.getElementsByTagName("html")[0].style.fontSize.replace(/px/gi,""));this.cardOutsideWidth=Math.ceil(this.outsideWidth*e/this.fontSize),this.cardOutsideHeight=Math.ceil(this.outsideHeight*e/this.fontSize),this.cardInsideWidth=Math.ceil(this.insideWidth*e/this.fontSize),this.cardInsideHeight=Math.ceil(this.insideHeight*e/this.fontSize),this.addCardStyle()},touchStart(e,t){if(this.mousedownTimer)return!1;this.$emit("startDrag",e,t);const n=this;let i=null,o=0===document.body.scrollTop?document.documentElement.scrollTop:document.body.scrollTop,r=o,s=0,d=0,a={left:0,top:0,originNum:-1},u={x:0,y:0},c=null,l=null,f=document.getElementById(t),p=this.data.find(e=>{return e.id===t});function m(e){s=a.top+(e.screenY-u.y),d=a.left+(e.screenX-u.x),document.querySelector(".d_moveBox").style.left=d+"px",document.querySelector(".d_moveBox").style.top=s+(r-o)+"px",i||(i=setTimeout(()=>{v(s+(r-o),d),i=null},200))}function h(e){r=0===document.body.scrollTop?document.documentElement.scrollTop:document.body.scrollTop,document.querySelector(".d_moveBox").style.top=s+r-o+"px"}function v(e,t){let i=Math.round(t/n.cardOutsideWidth)+1,o=Math.round(e/n.cardOutsideHeight);if(o>Math.ceil(n.data.length/n.colNum)-1||o<0||i<=0||i>n.colNum)return!1;const r=i+o*n.colNum;if(r!==p.positionNum){let e=n.data.find(e=>{return e.positionNum===r});e&&y(e,p)}}function y(e,t){if(c=t.positionNum,l=e.positionNum,n.$emit("swicthPosition",c,l,t),l>c){let e=[];for(let t=c+1;t<=l;t++){let i=n.data.find(e=>{return e.positionNum===t});e.push(i)}for(let t of e)n.$set(t,"positionNum",t.positionNum-1),document.querySelector("#"+t.id).style.top=n.computeTop(t.positionNum)+"px",document.querySelector("#"+t.id).style.left=n.computeLeft(t.positionNum)+"px";n.$set(t,"positionNum",l)}if(l<c){let e=[];for(let t=c-1;t>=l;t--){let i=n.data.find(e=>{return e.positionNum===t});e.push(i)}for(let t of e)n.$set(t,"positionNum",t.positionNum+1),document.querySelector("#"+t.id).style.top=n.computeTop(t.positionNum)+"px",document.querySelector("#"+t.id).style.left=n.computeLeft(t.positionNum)+"px";n.$set(t,"positionNum",l)}}function g(){clearTimeout(i),i=null,v(s+(r-o),d),document.querySelector(".d_moveBox").classList.add("d_transition"),document.querySelector(".d_moveBox").style.top=n.computeTop(p.positionNum)+"px",document.querySelector(".d_moveBox").style.left=n.computeLeft(p.positionNum)+"px",n.$emit("finishDrag",c,l,p),n.mousedownTimer=setTimeout(()=>{document.querySelector(".d_moveBox").classList.remove("d_transition"),document.querySelector(".d_moveBox").classList.remove("d_moveBox"),clearTimeout(n.mousedownTimer),n.mousedownTimer=null},300),document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",g),document.removeEventListener("scroll",h)}u.x=e.screenX,u.y=e.screenY,f.classList.add("d_moveBox"),d=a.left=parseInt(f.style.left.slice(0,f.style.left.length-2)),s=a.top=parseInt(f.style.top.slice(0,f.style.top.length-2)),document.addEventListener("mousemove",m),document.addEventListener("mouseup",g),document.addEventListener("scroll",h)},computeLeft(e){return(e-1)%this.colNum*this.cardOutsideWidth},computeTop(e){return(Math.ceil(e/this.colNum)-1)*this.cardOutsideHeight},addCardStyle(){this.$nextTick(()=>{this.data.forEach(e=>{document.querySelector("#"+e.id).style.top=this.computeTop(e.positionNum)+"px",document.querySelector("#"+e.id).style.left=this.computeLeft(e.positionNum)+"px"})})}},watch:{data:{handler:function(){this.addCardStyle()},immediate:!0}}},d=s;n("67dc");function a(e,t,n,i,o,r,s,d){var a,u="function"===typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=n,u._compiled=!0),i&&(u.functional=!0),r&&(u._scopeId="data-v-"+r),s?(a=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},u._ssrRegister=a):o&&(a=d?function(){o.call(this,this.$root.$options.shadowRoot)}:o),a)if(u.functional){u._injectStyles=a;var c=u.render;u.render=function(e,t){return a.call(t),c(e,t)}}else{var l=u.beforeCreate;u.beforeCreate=l?[].concat(l,a):[a]}return{exports:e,options:u}}var u=a(d,o,r,!1,null,"14e5f87a",null),c=u.exports;c.install=function(e){e.component(c.name,c)};var l=c;const f=l,p=[f],m=function(e){m.installed||p.map(t=>e.component(t.name,t))};n.d(t,"CardDragComponent",(function(){return f})),n.d(t,"installCardDragComponent",(function(){return m}))}})}));
//# sourceMappingURL=cardDragComponent.umd.min.js.map